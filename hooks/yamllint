#!/bin/bash
# Pre-commit hook: yamllint-with-check
# Runs yamllint with dependency checking

set -e

# Check if yamllint is available
if ! command -v yamllint >/dev/null 2>&1; then
    echo "‚ùå yamllint not found but required for YAML linting"
    echo ""
    echo "To fix this, install yamllint:"
    echo "  macOS:  brew install yamllint"
    echo "  Other:  pip install yamllint"
    exit 1
fi

# Run yamllint on the provided files
if ! yamllint "$@"; then
    echo ""
    echo "üí° Tip: Many yamllint issues can be automatically fixed by running prettier:"
    echo "  See differences: prettier [filename] | diff [filename] -"
    echo "  Apply changes:   prettier --write [filename]"
    exit 1
fi